<div class="row myRow">

    <div class="col s1 myCol">
        <a class="btn-floating btn-large waves-effect waves-light blue" (click)="view='list-view'" *ngIf="view=='card-view'"><i class="material-icons pointer">view_list</i></a>
        <a class="btn-floating btn-large waves-effect waves-light blue" (click)="view='card-view'" *ngIf="view=='list-view'"><i class="material-icons pointer" >view_comfy</i></a>
    </div>
    
    <div class="col s10" *ngIf="search">
        <input id="focusToInput" type="text" [(ngModel)]="term" placeholder="Zoek..." autofocus>
    </div>
    
    <div class="col s1 offsetsearchButton">
        <a class="btn-floating btn-large waves-effect waves-light amber darken-2" *ngIf="!search" (click)="search=!search;focusInput()"><i class="material-icons">search</i></a>
        <a class="btn-floating btn-large waves-effect waves-light amber darken-4 right" *ngIf="search" (click)="search=!search">
            <i class="material-icons">zoom_out</i></a>
    </div>

</div>

<!--Switch to cardview-->
<div class="row" *ngIf="view=='card-view'">
    <div class="col s6 m4 l4" *ngFor="let resident of residents | filter:term">
        <div class="card">
            <div class="card-content">
                <table>
                    <tr>
                        <td colspan="2" class="cardviewtd center">{{resident.firstName}}, {{resident.lastName}}</td>
                    </tr>
                    <tr>
                        <th class="cardviewtd right">kamer:</th>
                        <td class="cardviewtd">{{resident.room}}</td>
                    </tr>
                    <tr>
                        <th class="cardviewtd right">gebdatum:</th>
                        <td class="cardviewtd">{{resident.birthday | date:'dd-MM-yyyy'}}</td>
                    </tr>
                    <tr>
                        <th class="cardviewtd right">huisarts:</th>
                        <td class="cardviewtd">{{resident.doctor.name}}</td>
                    </tr>
                    <tr>
                        <th class="cardviewtd right">tel:</th>
                        <td class="cardviewtd">{{resident.doctor.phoneNumber}}</td>
                    </tr>
                </table>
            </div>
            <div class="crd">
                <div class="row">
                    <div class="col s4 center">
                        <i class="material-icons blue-text pointer" (click)="openEditModal(resident);focusInput2()">edit</i>
                    </div>
                    <div class="col s4 center">
                        <i class="material-icons orange-text pointer">portrait</i>
                    </div>
                    <div class="col s4 center">
                        <i class="material-icons red-text pointer" (click)="openModal(resident)">delete</i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Switch to listView-->
<div class="row" *ngIf="view=='list-view'">
    <table class="striped">
        <thead class="amber lighten-2">
            <tr>
                <th>Voornaam</th>
                <th>Naam</th>
                <th>Geboortedatum</th>
                <th>Kamer</th>
                <th>Huisarts</th>
                <th>Tel:</th>
                <th colspan="3">Actie</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let resident of residents | filter:term">
                <td>{{resident.firstName}}</td>
                <td>{{resident.lastName}}</td>
                <td>{{resident.birthday  | date:'dd-MM-yyyy'}}</td>
                <td>{{resident.room}}</td>
                <td>{{resident.doctor.name}}</td>
                <td>{{resident.doctor.phoneNumber}}</td>
                <td class="center"><i class="material-icons orange-text pointer">portrait</i></td>
                <td class="center"><i class="material-icons blue-text pointer" (click)="openEditModal(resident)">edit</i></td>
                <td class="center"><i class="material-icons red-text pointer" (click)="openModal(resident)">delete</i></td>
            </tr>
        </tbody>
    </table>
</div>


<!--DELETE MODAL-->
<div id="deleteModalResident" class="modal">
    <div class="modal-content">
        <h4>{{modalResident.firstName}}</h4>
        <p>Let op! U staat op het punt {{modalResident.firstName}} te verwijderen!</p>
    </div>
    <div class="modal-footer">
        <button class="btn modal-action modal-close waves-effect waves-red btn-flat red lighten-1 white-text" (click)="deleteResident(modalResident.id)">Verwijder<i class="material-icons red lighten-1 white-text right">remove_circle</i></button>
        <button class="btn modal-action modal-close waves-effect waves-green btn-flat blue lighten-1 white-text" (click)="closeModal()">Annuleer<i class="material-icons right">cancel</i></button>
    </div>
</div>
<!--EDIT MODAL-->
<div id="editModalResident" class="modal">
    <div class="modal-content">
        <div class="row">
            <h5>Wijzig gegevens van {{modalResident.firstName}}</h5>
            <div class="row">
                <div class="input-field col s6">
                    <input placeholder="{{modalResident.firstName}}" [(ngModel)]="updateResident.firstName" id="first_name" type="text" class="validate">
                    <label for="first_name" class="active">Voornaam</label>
                </div>
                <div class="input-field col s6">
                    <input placeholder="{{modalResident.lastName}}" [(ngModel)]="updateResident.lastName" id="last_name" type="text" class="validate">
                    <label for="last_name" class="active">Naam</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s6">
                    <input placeholder="{{modalResident.room}}" [(ngModel)]="updateResident.room" id="room" type="text" class="validate">
                    <label for="room" class="active">Kamer</label>
                </div>
                <div class="input-field col s6">
                    <input placeholder="{{modalResident.birthday | date:'dd-MM-yyyy' }}" [(ngModel)]="updateResident.birthday" id="birthDay" type="text" class="validate datepicker">
                    <label for="birthDay" class="active">Geboortedatum</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s6">
                    <input placeholder="{{modalResident.doctor.name}}" [(ngModel)]="updateResident.doctor.name" id="doctor_name" type="text" class="validate">
                    <label for="doctor_name" class="active">Huisarts</label>
                </div>
                <div class="input-field col s6">
                    <input placeholder="{{modalResident.doctor.phoneNumber}}" [(ngModel)]="updateResident.doctor.phoneNumber" id="doctor_number" type="text" class="validate">
                    <label for="doctor_number" class="active">Tel:</label>
                </div>
            </div>
            <div class="right">
                <a class="modal-action modal-close waves-effect waves-red btn-flat green lighten-1 white-text" (click)="editResident(modalResident)">Opslaan<i class="material-icons right">send</i></a>
                <a class="modal-action modal-close waves-effect waves-green btn-flat red lighten-1 white-text" (click)="closeModal()">Annuleer<i class="material-icons right">cancel</i></a>
            </div>



        </div>
    </div>
</div>

<!-- Modal Structure -->
<!-- Form to add resident -->
<div id="add-resident-modal" class="modal">
    <div class="modal-content">
        <h4>Bewoner toevoegen</h4>
        <div class="row">
            <form class="col s12" (ngSubmit)="addResident(f)" #f="ngForm">
                <div class="row">
                    <div class="input-field col s6">
                        <input id="afirst_name" type="text" class="validate" ngModel name="aFirstName" required>
                        <label for="afirst_name">Voornaam</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="alast_name" type="text" class="validate" ngModel name="aLastName" required>
                        <label for="alast_name">Familienaam</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <input id="aroom" type="text" class="validate" ngModel name="aRoom" required>
                        <label for="aroom">Kamer</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="abirthdate" type="text" class="datepicker validate" ngModel name="aBirthday">
                        <label for="abirthdate">Geboortedatum</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <input id="adoctor" type="text" class="validate" ngModel name="aDoctor">
                        <label for="adoctor">Huisarts</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="atelefoon" type="text" class="validate" ngModel name="aTelefoon">
                        <label for="atelefoon">Telefoon</label>
                    </div>
                </div>
            <div class="modal-footer">
                <button class="btn waves-effect waves-light green lighten-1" type="submit" name="action" [disabled]="!f.valid">
                    Toevoegen
                    <i class="material-icons right">send</i>
                </button>
                <a (click)="resetForm(f)" class="btn waves-effect waves-light red lighten-1 modal-action modal-close">
                    Annuleren
                    <i class="material-icons right">cancel</i>
                </a>
            </div>
                
            </form>
        </div>
    </div>
    
</div>

<!-- Modal Trigger -->
<!-- This will pop up the form to add a resident -->
<div class="fixed-action-btn">
    <a class="btn-floating btn-large red modal-trigger" (click)="openResidentAddModal()">
        <i class="large material-icons">person_add</i>
    </a>
</div>
